# 待办事项

本文档记录项目的待办事项和开发计划。

## 📋 任务优先级

- 🔴 **P0**: 核心功能,必须完成
- 🟠 **P1**: 重要功能,优先完成
- 🟡 **P2**: 一般功能,按计划完成
- 🟢 **P3**: 优化项,有时间再做

## 🔴 P0 - 核心功能

### 1. 开发 @cwj/auth 认证包

**优先级**: 🔴 P0  
**负责人**: TBD  
**预计时间**: 2 周

**任务清单:**

- [ ] **Token 存储管理(Cookie)**
  - [ ] Cookie 读写工具函数
    - [ ] `setCookie(name, value, options)`
    - [ ] `getCookie(name)`
    - [ ] `removeCookie(name, options)`
  - [ ] 支持域名配置(`domain: .xxx.com`)
  - [ ] 支持安全选项(`secure`, `sameSite`, `httpOnly`)
  - [ ] 单元测试

- [ ] **URL 拦截器(浏览器级别)**
  - [ ] `setupUrlGuard(options)` 函数
  - [ ] 检测 Cookie 中的 Token
  - [ ] 白名单页面配置
  - [ ] 无 Token 自动跳转 account
  - [ ] 单元测试

- [ ] **XHR 顶层拦截器**
  - [ ] 拦截 `XMLHttpRequest`
    - [ ] 响应拦截
    - [ ] 检测业务状态码 10001
    - [ ] 清除 Cookie 并跳转
  - [ ] 拦截 `Fetch API`
    - [ ] 响应拦截
    - [ ] 检测业务状态码 10001
    - [ ] 清除 Cookie 并跳转
  - [ ] 单元测试

- [ ] **Vue Router 守卫(可选)**
  - [ ] `authGuard()` 认证守卫
  - [ ] `permissionGuard()` 权限守卫
  - [ ] 单元测试

- [ ] **权限控制**
  - [ ] `usePermission()` Composable
    - [ ] `hasPermission(permission)`
    - [ ] `hasAnyPermission(permissions)`
    - [ ] `hasAllPermissions(permissions)`
  - [ ] `v-permission` 指令
  - [ ] 单元测试

- [ ] **类型定义**
  - [ ] `AuthOptions`
  - [ ] `CookieOptions`
  - [ ] `UserInfo`
  - [ ] `UrlGuardOptions`
  - [ ] `XhrInterceptorOptions`

- [ ] **构建和发布**
  - [ ] 配置 `tsup` 构建
  - [ ] 输出 ESM、CommonJS、TypeScript 类型
  - [ ] 发布到私有 npm 仓库

### 2. 开发 Account 账号中心

**优先级**: 🔴 P0  
**负责人**: TBD  
**预计时间**: 2 周

**任务清单:**

- [ ] **登录页面**
  - [ ] 账号密码登录
  - [ ] 手机验证码登录
  - [ ] 扫码登录
  - [ ] 表单验证
  - [ ] 登录接口集成
  - [ ] 集成 @cwj/auth 包

- [ ] **注册页面**
  - [ ] 注册表单
  - [ ] 验证码发送
  - [ ] 注册接口集成

- [ ] **找回密码页面**
  - [ ] 找回密码表单
  - [ ] 验证码验证
  - [ ] 重置密码接口

- [ ] **第三方登录**
  - [ ] 微信登录
  - [ ] 钉钉登录
  - [ ] 企业微信登录

- [ ] **OAuth 授权页面**
  - [ ] 授权确认页面
  - [ ] OAuth 流程集成

### 3. 主应用基础功能

**优先级**: 🔴 P0  
**负责人**: TBD  
**预计时间**: 1 周

**任务清单:**

- [ ] **路由配置**
  - [ ] 主应用路由
  - [ ] 子应用路由集成
  - [ ] 路由守卫

- [ ] **状态管理**
  - [ ] 全局 Store
  - [ ] 用户状态管理
  - [ ] 应用状态管理

- [ ] **事件总线**
  - [ ] 全局事件总线
  - [ ] 跨应用通信

- [ ] **集成 @cwj/auth**
  - [ ] 初始化认证
  - [ ] URL 拦截器
  - [ ] XHR 拦截器

## 🟠 P1 - 重要功能

### 4. 实现设计器核心功能

**优先级**: 🟠 P1  
**负责人**: TBD  
**预计时间**: 4 周

**任务清单:**

- [ ] **拖拽编排引擎**
  - [ ] 组件拖拽
  - [ ] 组件放置
  - [ ] 组件调整大小
  - [ ] 组件层级管理

- [ ] **组件库集成**
  - [ ] PC 端组件库
  - [ ] Mobile 端组件库
  - [ ] 自定义组件扩展

- [ ] **属性配置面板**
  - [ ] 基础属性配置
  - [ ] 样式配置
  - [ ] 事件配置
  - [ ] 数据绑定配置

- [ ] **实时预览**
  - [ ] PC 端预览
  - [ ] Mobile 端预览
  - [ ] 响应式预览

- [ ] **AST 生成器**
  - [ ] 组件树转 AST
  - [ ] 支持指令(v-if/v-for/v-show)
  - [ ] 支持事件绑定
  - [ ] 支持数据绑定

- [ ] **页面数据持久化**
  - [ ] 保存页面数据
  - [ ] 加载页面数据
  - [ ] 版本管理

### 5. 实现渲染器核心功能

**优先级**: 🟠 P1  
**负责人**: TBD  
**预计时间**: 4 周

**任务清单:**

- [ ] **AST 解析引擎**
  - [ ] AST 解析器
  - [ ] 节点遍历
  - [ ] 节点转换

- [ ] **动态组件渲染**
  - [ ] 组件注册
  - [ ] 组件渲染
  - [ ] 组件嵌套

- [ ] **指令系统**
  - [ ] v-if 指令
  - [ ] v-for 指令
  - [ ] v-show 指令
  - [ ] v-model 指令
  - [ ] 自定义指令

- [ ] **事件系统**
  - [ ] 事件绑定
  - [ ] 事件处理
  - [ ] 表达式解析

- [ ] **数据绑定**
  - [ ] 响应式数据
  - [ ] 计算属性
  - [ ] 侦听器

- [ ] **运行时沙箱**
  - [ ] 沙箱环境
  - [ ] 安全隔离
  - [ ] 错误处理

### 6. 开发管理后台

**优先级**: 🟠 P1  
**负责人**: TBD  
**预计时间**: 2 周

**任务清单:**

- [ ] **应用管理**
  - [ ] 应用列表
  - [ ] 应用创建
  - [ ] 应用编辑
  - [ ] 应用删除

- [ ] **页面管理**
  - [ ] 页面列表
  - [ ] 页面创建
  - [ ] 页面编辑
  - [ ] 页面发布

- [ ] **用户权限管理**
  - [ ] 用户列表
  - [ ] 角色管理
  - [ ] 权限配置

- [ ] **数据统计**
  - [ ] 访问统计
  - [ ] 使用统计
  - [ ] 错误统计

## 🟡 P2 - 一般功能

### 7. 开发公共包

**优先级**: 🟡 P2  
**负责人**: TBD  
**预计时间**: 4 周

**任务清单:**

- [ ] **@cwj/ui-pc 组件库**
  - [ ] 基础组件(Button、Input、Select 等)
  - [ ] 布局组件(Layout、Grid、Container 等)
  - [ ] 表单组件(Form、FormItem、Upload 等)
  - [ ] 数据展示组件(Table、Pagination、Tree 等)
  - [ ] 业务组件(自定义)
  - [ ] 组件文档(VitePress)

- [ ] **@cwj/ui-mobile 组件库**
  - [ ] 基础组件
  - [ ] 表单组件
  - [ ] 展示组件
  - [ ] 业务组件
  - [ ] 组件文档

- [ ] **@cwj/tools 工具库**
  - [ ] 日期工具
  - [ ] 字符串工具
  - [ ] 数组工具
  - [ ] 对象工具
  - [ ] 业务工具
  - [ ] API 文档

- [ ] **@cwj/auth 文档站点**
  - [ ] API 文档
  - [ ] 使用指南
  - [ ] 最佳实践
  - [ ] 示例代码

### 8. 测试

**优先级**: 🟡 P2  
**负责人**: TBD  
**预计时间**: 2 周

**任务清单:**

- [ ] **单元测试**
  - [ ] @cwj/auth 单元测试
  - [ ] 主应用单元测试
  - [ ] 子应用单元测试
  - [ ] 公共包单元测试

- [ ] **E2E 测试**
  - [ ] 登录流程测试
  - [ ] 设计器功能测试
  - [ ] 渲染器功能测试
  - [ ] 管理后台功能测试

- [ ] **测试覆盖率**
  - [ ] 覆盖率 >= 80%

## 🟢 P3 - 优化项

### 9. 性能优化

**优先级**: 🟢 P3  
**负责人**: TBD  
**预计时间**: 1 周

**任务清单:**

- [ ] **代码分割**
  - [ ] 路由懒加载
  - [ ] 组件懒加载
  - [ ] 第三方库按需加载

- [ ] **缓存优化**
  - [ ] HTTP 缓存
  - [ ] 静态资源缓存
  - [ ] API 缓存

- [ ] **打包优化**
  - [ ] Tree Shaking
  - [ ] 代码压缩
  - [ ] 图片压缩

- [ ] **性能监控**
  - [ ] 性能指标收集
  - [ ] 性能分析
  - [ ] 性能优化建议

### 10. 错误监控

**优先级**: 🟢 P3  
**负责人**: TBD  
**预计时间**: 1 周

**任务清单:**

- [ ] **错误监控**
  - [ ] 集成 Sentry
  - [ ] 错误上报
  - [ ] 错误分析

- [ ] **日志收集**
  - [ ] 日志收集
  - [ ] 日志分析
  - [ ] 日志告警

### 11. 部署和运维

**优先级**: 🟢 P3  
**负责人**: TBD  
**预计时间**: 1 周

**任务清单:**

- [ ] **CI/CD**
  - [ ] GitHub Actions 配置
  - [ ] 自动构建
  - [ ] 自动部署
  - [ ] 自动测试

- [ ] **Nginx 配置**
  - [ ] 反向代理配置
  - [ ] HTTPS 配置
  - [ ] 缓存配置
  - [ ] 安全配置

- [ ] **Docker 容器化**
  - [ ] Dockerfile
  - [ ] docker-compose.yml
  - [ ] 镜像构建
  - [ ] 容器部署

- [ ] **监控告警**
  - [ ] 服务监控
  - [ ] 资源监控
  - [ ] 告警配置

## 📅 开发计划

### 第一阶段(1-2 个月)

- ✅ 项目初始化和架构设计
- 🔴 开发 @cwj/auth 认证包
- 🔴 开发 Account 账号中心
- 🔴 主应用基础功能

### 第二阶段(3-4 个月)

- 🟠 实现设计器核心功能
- 🟠 实现渲染器核心功能
- 🟠 开发管理后台

### 第三阶段(5-6 个月)

- 🟡 开发公共包(@cwj/ui-pc、@cwj/ui-mobile、@cwj/tools)
- 🟡 编写测试
- 🟢 性能优化

### 第四阶段(7-8 个月)

- 🟢 错误监控和日志收集
- 🟢 部署和运维
- 🟢 文档完善

## 📊 进度跟踪

| 任务             | 优先级 | 状态   | 负责人 | 预计时间 | 实际时间 |
| ---------------- | ------ | ------ | ------ | -------- | -------- |
| @cwj/auth 认证包 | 🔴 P0  | 未开始 | TBD    | 2 周     | -        |
| Account 账号中心 | 🔴 P0  | 未开始 | TBD    | 2 周     | -        |
| 主应用基础功能   | 🔴 P0  | 未开始 | TBD    | 1 周     | -        |
| 设计器核心功能   | 🟠 P1  | 未开始 | TBD    | 4 周     | -        |
| 渲染器核心功能   | 🟠 P1  | 未开始 | TBD    | 4 周     | -        |
| 管理后台         | 🟠 P1  | 未开始 | TBD    | 2 周     | -        |
| 公共包开发       | 🟡 P2  | 未开始 | TBD    | 4 周     | -        |
| 测试             | 🟡 P2  | 未开始 | TBD    | 2 周     | -        |
| 性能优化         | 🟢 P3  | 未开始 | TBD    | 1 周     | -        |
| 错误监控         | 🟢 P3  | 未开始 | TBD    | 1 周     | -        |
| 部署和运维       | 🟢 P3  | 未开始 | TBD    | 1 周     | -        |

## 📝 更新日志

### 2024-12-25

- ✅ 创建项目文档结构
- ✅ 完成架构设计文档
- ✅ 完成开发指南文档
- ✅ 完成部署文档
- ✅ 完成开发规范文档
- ✅ 完成 @cwj/auth 文档
- ✅ 完成待办事项文档

## 🔗 相关文档

- [项目概述](../README.md)
- [架构设计](./架构设计.md)
- [开发指南](./开发指南.md)
- [部署文档](./部署文档.md)
- [开发规范](./开发规范.md)
- [@cwj/auth 文档](./packages/认证包文档.md)
