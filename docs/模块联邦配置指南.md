# æ¨¡å—è”é‚¦é…ç½®æŒ‡å—

## æ¦‚è¿°

æœ¬é¡¹ç›®ä½¿ç”¨ **Vite + æ¨¡å—è”é‚¦ï¼ˆModule Federationï¼‰** å®ç°å¾®å‰ç«¯æ¶æ„ï¼Œä¸»åŒ…ä½œä¸º Host åº”ç”¨ï¼Œå„å­åŒ…ä½œä¸º Remote åº”ç”¨ï¼Œå®ç°è¿è¡Œæ—¶åŠ¨æ€åŠ è½½å’Œå…±äº«ä¾èµ–ã€‚

## æŠ€æœ¯ä¼˜åŠ¿

### 1. æ¨¡å—è”é‚¦ vs ä¼ ç»Ÿæ–¹æ¡ˆ

| ç‰¹æ€§       | æ¨¡å—è”é‚¦   | Workspace å¯¼å…¥ | iframe     |
| ---------- | ---------- | -------------- | ---------- |
| è¿è¡Œæ—¶åŠ è½½ | âœ…         | âŒ             | âœ…         |
| ä¾èµ–å…±äº«   | âœ…         | âœ…             | âŒ         |
| ç‹¬ç«‹éƒ¨ç½²   | âœ…         | âŒ             | âœ…         |
| ç±»å‹å®‰å…¨   | âœ…         | âœ…             | âŒ         |
| æ€§èƒ½       | â­â­â­â­â­ | â­â­â­         | â­â­       |
| éš”ç¦»æ€§     | â­â­â­â­   | â­â­           | â­â­â­â­â­ |

### 2. æ ¸å¿ƒä¼˜åŠ¿

- âœ… **è¿è¡Œæ—¶é›†æˆ** - æ— éœ€é‡æ–°æ„å»ºä¸»åº”ç”¨å³å¯æ›´æ–°å­åº”ç”¨
- âœ… **ä¾èµ–å…±äº«** - Vueã€Vue Router ç­‰å…±äº«ä¾èµ–åªåŠ è½½ä¸€æ¬¡
- âœ… **ç‹¬ç«‹å¼€å‘** - å­åº”ç”¨å¯ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²
- âœ… **æŒ‰éœ€åŠ è½½** - åªåœ¨è®¿é—®æ—¶æ‰åŠ è½½å¯¹åº”çš„å­åº”ç”¨
- âœ… **ç‰ˆæœ¬æ§åˆ¶** - æ”¯æŒå­åº”ç”¨ç‰ˆæœ¬ç®¡ç†å’Œç°åº¦å‘å¸ƒ

## æ¶æ„è®¾è®¡

### 1. åº”ç”¨è§’è‰²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             ä¸»åº”ç”¨ (Host)                        â”‚
â”‚           localhost:5173                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  åŠ è½½å¹¶ç®¡ç†æ‰€æœ‰è¿œç¨‹å­åº”ç”¨                â”‚   â”‚
â”‚  â”‚  å…±äº« Vueã€Vue Routerã€Pinia            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“           â†“           â†“           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ è´¦å·ä¸­å¿ƒ  â”‚ â”‚ åå°ç®¡ç†  â”‚ â”‚  è®¾è®¡å™¨   â”‚ â”‚  æ¸²æŸ“å™¨   â”‚
    â”‚  Remote  â”‚ â”‚  Remote  â”‚ â”‚  Remote  â”‚ â”‚  Remote  â”‚
    â”‚  :5001   â”‚ â”‚  :5002   â”‚ â”‚  :5003   â”‚ â”‚  :5004   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ç«¯å£åˆ†é…

| åº”ç”¨     | ç«¯å£ | è§’è‰²   | è¯´æ˜                     |
| -------- | ---- | ------ | ------------------------ |
| ä¸»åº”ç”¨   | 5173 | Host   | å®¹å™¨åº”ç”¨ï¼ŒåŠ è½½æ‰€æœ‰å­åº”ç”¨ |
| è´¦å·ä¸­å¿ƒ | 5001 | Remote | æä¾›ç™»å½•ã€æ³¨å†Œç­‰åŠŸèƒ½     |
| åå°ç®¡ç† | 5002 | Remote | æä¾›ç®¡ç†åå°åŠŸèƒ½         |
| è®¾è®¡å™¨   | 5003 | Remote | æä¾›å¯è§†åŒ–è®¾è®¡åŠŸèƒ½       |
| æ¸²æŸ“å™¨   | 5004 | Remote | æä¾›åŠ¨æ€æ¸²æŸ“åŠŸèƒ½         |

## é…ç½®è¯¦è§£

### 1. ä¸»åº”ç”¨é…ç½®ï¼ˆHostï¼‰

**æ–‡ä»¶**: `vite.config.ts`

```typescript
import federation from '@originjs/vite-plugin-federation'

export default defineConfig({
  plugins: [
    vue(),
    federation({
      name: 'main-app',
      // è¿œç¨‹å­åº”ç”¨é…ç½®
      remotes: {
        accountApp: {
          external: 'http://localhost:5001/assets/remoteEntry.js',
          from: 'vite',
          format: 'esm',
        },
        adminApp: {
          external: 'http://localhost:5002/assets/remoteEntry.js',
          from: 'vite',
          format: 'esm',
        },
        designerApp: {
          external: 'http://localhost:5003/assets/remoteEntry.js',
          from: 'vite',
          format: 'esm',
        },
        rendererApp: {
          external: 'http://localhost:5004/assets/remoteEntry.js',
          from: 'vite',
          format: 'esm',
        },
      },
      // å…±äº«ä¾èµ–é…ç½®
      shared: {
        vue: {
          singleton: true, // å•ä¾‹æ¨¡å¼
          requiredVersion: '^3.5.26',
        },
        'vue-router': {
          singleton: true,
          requiredVersion: '^4.5.0',
        },
        pinia: {
          singleton: true,
          requiredVersion: '^2.3.0',
        },
      },
    }),
  ],
})
```

**é…ç½®è¯´æ˜**:

- `name`: ä¸»åº”ç”¨åç§°
- `remotes`: è¿œç¨‹å­åº”ç”¨åˆ—è¡¨
  - `external`: è¿œç¨‹å…¥å£æ–‡ä»¶çš„ URL
  - `from`: æ„å»ºå·¥å…·ç±»å‹ï¼ˆvite/webpackï¼‰
  - `format`: æ¨¡å—æ ¼å¼ï¼ˆesm/varï¼‰
- `shared`: å…±äº«ä¾èµ–é…ç½®
  - `singleton`: æ˜¯å¦å•ä¾‹ï¼ˆç¡®ä¿åªåŠ è½½ä¸€æ¬¡ï¼‰
  - `requiredVersion`: è¦æ±‚çš„ç‰ˆæœ¬èŒƒå›´

### 2. å­åº”ç”¨é…ç½®ï¼ˆRemoteï¼‰

**æ–‡ä»¶**: `@cwj/account/vite.config.ts`

```typescript
import federation from '@originjs/vite-plugin-federation'

export default defineConfig({
  plugins: [
    vue(),
    federation({
      name: 'accountApp',
      filename: 'remoteEntry.js',
      // å¯¼å‡ºçš„æ¨¡å—
      exposes: {
        './App': './src/App.vue',
        './Login': './src/views/Login.vue',
        './Register': './src/views/Register.vue',
        './ForgotPassword': './src/views/ForgotPassword.vue',
      },
      // å…±äº«ä¾èµ–ï¼ˆä¸ä¸»åº”ç”¨ä¿æŒä¸€è‡´ï¼‰
      shared: {
        vue: {
          singleton: true,
          requiredVersion: '^3.5.26',
        },
        'vue-router': {
          singleton: true,
          requiredVersion: '^4.5.0',
        },
      },
    }),
  ],
  server: {
    port: 5001, // å›ºå®šç«¯å£
    cors: true, // å…è®¸è·¨åŸŸ
    open: false, // ä¸è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
  },
})
```

**é…ç½®è¯´æ˜**:

- `name`: å­åº”ç”¨åç§°ï¼ˆå¿…é¡»ä¸ä¸»åº”ç”¨ remotes ä¸­çš„ key åŒ¹é…ï¼‰
- `filename`: å…¥å£æ–‡ä»¶åï¼ˆé»˜è®¤ remoteEntry.jsï¼‰
- `exposes`: å¯¼å‡ºçš„æ¨¡å—åˆ—è¡¨
  - key: å¯¼å‡ºè·¯å¾„ï¼ˆä¸»åº”ç”¨ä¸­ä½¿ç”¨ï¼‰
  - value: æœ¬åœ°æ–‡ä»¶è·¯å¾„
- `shared`: å…±äº«ä¾èµ–ï¼ˆå¿…é¡»ä¸ä¸»åº”ç”¨ä¸€è‡´ï¼‰
- `server.port`: å›ºå®šç«¯å£ï¼ˆé‡è¦ï¼ï¼‰
- `server.cors`: å…è®¸è·¨åŸŸè®¿é—®

## ä½¿ç”¨æ–¹å¼

### 1. åœ¨ä¸»åº”ç”¨ä¸­åŠ è½½å­åº”ç”¨

**å®¹å™¨ç»„ä»¶ç¤ºä¾‹**: `src/views/AccountContainer.vue`

```vue
<script setup lang="ts">
import { ref, onMounted, type Component } from 'vue'

const accountApp = ref<Component | null>(null)
const loading = ref(true)
const error = ref<string | null>(null)

onMounted(async () => {
  try {
    loading.value = true
    // é€šè¿‡æ¨¡å—è”é‚¦åŠ è½½è¿œç¨‹ç»„ä»¶
    // @ts-ignore - æ¨¡å—è”é‚¦è¿è¡Œæ—¶æ³¨å…¥
    const module = await import('accountApp/App')
    accountApp.value = module.default
    loading.value = false
  } catch (err) {
    error.value = 'è´¦å·ä¸­å¿ƒåŠ è½½å¤±è´¥ï¼Œè¯·ç¡®ä¿å­åº”ç”¨å·²å¯åŠ¨ï¼ˆç«¯å£ 5001ï¼‰'
    loading.value = false
  }
})
</script>

<template>
  <div v-if="loading">åŠ è½½ä¸­...</div>
  <div v-else-if="error">{{ error }}</div>
  <component :is="accountApp" v-else-if="accountApp" />
</template>
```

**å…³é”®ç‚¹**:

1. ä½¿ç”¨ `import('accountApp/App')` åŠ¨æ€å¯¼å…¥
2. `accountApp` æ˜¯ä¸»åº”ç”¨ remotes ä¸­é…ç½®çš„ key
3. `/App` æ˜¯å­åº”ç”¨ exposes ä¸­é…ç½®çš„å¯¼å‡ºè·¯å¾„
4. éœ€è¦ `@ts-ignore` å› ä¸º TypeScript æ— æ³•è¯†åˆ«è¿è¡Œæ—¶æ³¨å…¥çš„æ¨¡å—

### 2. å¯¼å…¥å­åº”ç”¨çš„å…¶ä»–æ¨¡å—

```typescript
// å¯¼å…¥è´¦å·ä¸­å¿ƒçš„ç™»å½•ç»„ä»¶
const LoginComponent = await import('accountApp/Login')

// å¯¼å…¥æ¸²æŸ“å™¨çš„è§£æå™¨
const Parser = await import('rendererApp/Parser')

// å¯¼å…¥è®¾è®¡å™¨çš„è®¾è®¡å™¨ç»„ä»¶
const Designer = await import('designerApp/Designer')
```

## å¼€å‘æµç¨‹

### 1. å¯åŠ¨æ‰€æœ‰åº”ç”¨

**æ–¹å¼ä¸€ï¼šæ‰‹åŠ¨å¯åŠ¨ï¼ˆæ¨èç”¨äºå¼€å‘ï¼‰**

```bash
# ç»ˆç«¯ 1 - å¯åŠ¨ä¸»åº”ç”¨
cd /Users/cwj/Documents/code/my-git/low-code-monorepo
pnpm dev

# ç»ˆç«¯ 2 - å¯åŠ¨è´¦å·ä¸­å¿ƒ
cd @cwj/account
pnpm dev

# ç»ˆç«¯ 3 - å¯åŠ¨åå°ç®¡ç†
cd @cwj/admin
pnpm dev

# ç»ˆç«¯ 4 - å¯åŠ¨è®¾è®¡å™¨
cd @cwj/designer
pnpm dev

# ç»ˆç«¯ 5 - å¯åŠ¨æ¸²æŸ“å™¨
cd @cwj/renderer
pnpm dev
```

**æ–¹å¼äºŒï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬**

åˆ›å»º `scripts/dev-all.sh`:

```bash
#!/bin/bash

# å¯åŠ¨æ‰€æœ‰åº”ç”¨
echo "ğŸš€ å¯åŠ¨æ‰€æœ‰åº”ç”¨..."

# å¯åŠ¨å­åº”ç”¨ï¼ˆåå°è¿è¡Œï¼‰
cd @cwj/account && pnpm dev &
cd @cwj/admin && pnpm dev &
cd @cwj/designer && pnpm dev &
cd @cwj/renderer && pnpm dev &

# ç­‰å¾…å­åº”ç”¨å¯åŠ¨
sleep 5

# å¯åŠ¨ä¸»åº”ç”¨ï¼ˆå‰å°è¿è¡Œï¼‰
pnpm dev
```

### 2. è®¿é—®åº”ç”¨

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5173
2. çœ‹åˆ°å·¥ä½œå°é¦–é¡µï¼Œæ˜¾ç¤º 4 ä¸ªåº”ç”¨å¡ç‰‡
3. ç‚¹å‡»ä»»æ„å¡ç‰‡ï¼Œä¸»åº”ç”¨ä¼šé€šè¿‡æ¨¡å—è”é‚¦åŠ è½½å¯¹åº”çš„å­åº”ç”¨
4. å­åº”ç”¨çš„ä»£ç ä»å¯¹åº”ç«¯å£åŠ¨æ€åŠ è½½

### 3. å¼€å‘å­åº”ç”¨

1. ä¿®æ”¹å­åº”ç”¨ä»£ç 
2. å­åº”ç”¨è‡ªåŠ¨çƒ­æ›´æ–°
3. åˆ·æ–°ä¸»åº”ç”¨é¡µé¢ï¼Œå³å¯çœ‹åˆ°æ›´æ–°
4. **æ— éœ€é‡å¯ä¸»åº”ç”¨**

## ç”Ÿäº§éƒ¨ç½²

### 1. æ„å»ºæ‰€æœ‰åº”ç”¨

```bash
# æ„å»ºä¸»åº”ç”¨
pnpm build:production

# æ„å»ºæ‰€æœ‰å­åº”ç”¨
cd @cwj/account && pnpm build:production
cd @cwj/admin && pnpm build:production
cd @cwj/designer && pnpm build:production
cd @cwj/renderer && pnpm build:production
```

### 2. éƒ¨ç½²é…ç½®

**ä¸»åº”ç”¨ vite.config.tsï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰**:

```typescript
remotes: {
  accountApp: {
    external: 'https://account.yourdomain.com/assets/remoteEntry.js',
    from: 'vite',
    format: 'esm',
  },
  // ... å…¶ä»–å­åº”ç”¨
}
```

### 3. éƒ¨ç½²æ¶æ„

```
CDN / Nginx
â”œâ”€â”€ main-app (https://app.yourdomain.com)
â”œâ”€â”€ account-app (https://account.yourdomain.com)
â”œâ”€â”€ admin-app (https://admin.yourdomain.com)
â”œâ”€â”€ designer-app (https://designer.yourdomain.com)
â””â”€â”€ renderer-app (https://renderer.yourdomain.com)
```

### 4. Nginx é…ç½®ç¤ºä¾‹

```nginx
# ä¸»åº”ç”¨
server {
    listen 80;
    server_name app.yourdomain.com;
    root /var/www/main-app;

    location / {
        try_files $uri $uri/ /index.html;
    }
}

# è´¦å·ä¸­å¿ƒå­åº”ç”¨
server {
    listen 80;
    server_name account.yourdomain.com;
    root /var/www/account-app;

    # å…è®¸è·¨åŸŸ
    add_header Access-Control-Allow-Origin *;
    add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';

    location / {
        try_files $uri $uri/ /index.html;
    }
}
```

## å¸¸è§é—®é¢˜

### Q1: å­åº”ç”¨åŠ è½½å¤±è´¥

**åŸå› **:

- å­åº”ç”¨æœªå¯åŠ¨
- ç«¯å£é…ç½®é”™è¯¯
- CORS è·¨åŸŸé—®é¢˜

**è§£å†³**:

```bash
# æ£€æŸ¥å­åº”ç”¨æ˜¯å¦å¯åŠ¨
lsof -i :5001
lsof -i :5002
lsof -i :5003
lsof -i :5004

# ç¡®ä¿å­åº”ç”¨é…ç½®äº† cors: true
server: {
  cors: true
}
```

### Q2: ä¾èµ–ç‰ˆæœ¬å†²çª

**åŸå› **:

- ä¸»åº”ç”¨å’Œå­åº”ç”¨çš„å…±äº«ä¾èµ–ç‰ˆæœ¬ä¸ä¸€è‡´

**è§£å†³**:

```bash
# ç¡®ä¿æ‰€æœ‰åº”ç”¨ä½¿ç”¨ç›¸åŒç‰ˆæœ¬
# package.json
{
  "dependencies": {
    "vue": "^3.5.26",
    "vue-router": "^4.5.0",
    "pinia": "^2.3.0"
  }
}
```

### Q3: TypeScript ç±»å‹é”™è¯¯

**åŸå› **:

- TypeScript æ— æ³•è¯†åˆ«æ¨¡å—è”é‚¦è¿è¡Œæ—¶æ³¨å…¥çš„æ¨¡å—

**è§£å†³**:

```typescript
// ä½¿ç”¨ @ts-ignore
// @ts-ignore
const module = await import('accountApp/App')

// æˆ–è€…åˆ›å»ºç±»å‹å£°æ˜æ–‡ä»¶
// src/types/federation.d.ts
declare module 'accountApp/App'
declare module 'adminApp/App'
declare module 'designerApp/App'
declare module 'rendererApp/App'
```

### Q4: çƒ­æ›´æ–°ä¸ç”Ÿæ•ˆ

**åŸå› **:

- å­åº”ç”¨ä¿®æ”¹åï¼Œä¸»åº”ç”¨ç¼“å­˜äº†æ—§ç‰ˆæœ¬

**è§£å†³**:

```bash
# ç¡¬åˆ·æ–°æµè§ˆå™¨
Ctrl + Shift + R (Windows/Linux)
Cmd + Shift + R (Mac)

# æˆ–æ¸…é™¤ç¼“å­˜ååˆ·æ–°
```

### Q5: ç”Ÿäº§ç¯å¢ƒ 404

**åŸå› **:

- remoteEntry.js è·¯å¾„é…ç½®é”™è¯¯
- å­åº”ç”¨æœªæ­£ç¡®éƒ¨ç½²

**è§£å†³**:

```typescript
// æ£€æŸ¥ç”Ÿäº§ç¯å¢ƒé…ç½®
remotes: {
  accountApp: {
    external: 'https://account.yourdomain.com/assets/remoteEntry.js',
    // ç¡®ä¿ URL å¯è®¿é—®
  }
}

// æµ‹è¯• remoteEntry.js æ˜¯å¦å¯è®¿é—®
curl https://account.yourdomain.com/assets/remoteEntry.js
```

## æ€§èƒ½ä¼˜åŒ–

### 1. é¢„åŠ è½½å­åº”ç”¨

```typescript
// src/utils/preload.ts
export const preloadRemoteApp = (appName: string, modulePath: string) => {
  return import(`${appName}/${modulePath}`)
}

// åœ¨è·¯ç”±å®ˆå«ä¸­é¢„åŠ è½½
router.beforeEach((to, from, next) => {
  if (to.path === '/account') {
    preloadRemoteApp('accountApp', 'App')
  }
  next()
})
```

### 2. ç¼“å­˜ç­–ç•¥

```typescript
// ç¼“å­˜å·²åŠ è½½çš„è¿œç¨‹æ¨¡å—
const moduleCache = new Map()

const loadRemoteModule = async (appName: string, modulePath: string) => {
  const cacheKey = `${appName}/${modulePath}`

  if (moduleCache.has(cacheKey)) {
    return moduleCache.get(cacheKey)
  }

  const module = await import(`${appName}/${modulePath}`)
  moduleCache.set(cacheKey, module)
  return module
}
```

### 3. é”™è¯¯è¾¹ç•Œ

```vue
<template>
  <ErrorBoundary>
    <component :is="remoteApp" />
  </ErrorBoundary>
</template>

<script setup lang="ts">
import { defineAsyncComponent } from 'vue'

const ErrorBoundary = defineAsyncComponent({
  loader: () => import('./ErrorBoundary.vue'),
  errorComponent: () => import('./ErrorFallback.vue'),
  delay: 200,
  timeout: 3000,
})
</script>
```

## æœ€ä½³å®è·µ

### 1. ç‰ˆæœ¬ç®¡ç†

```typescript
// å­åº”ç”¨æ·»åŠ ç‰ˆæœ¬å·
exposes: {
  './App@1.0.0': './src/App.vue',
}

// ä¸»åº”ç”¨æŒ‡å®šç‰ˆæœ¬
const module = await import('accountApp/App@1.0.0')
```

### 2. ç°åº¦å‘å¸ƒ

```typescript
// æ ¹æ®ç”¨æˆ· ID åŠ è½½ä¸åŒç‰ˆæœ¬
const version = userId % 10 < 5 ? '1.0.0' : '2.0.0'
const module = await import(`accountApp/App@${version}`)
```

### 3. ç›‘æ§å’Œæ—¥å¿—

```typescript
const loadRemoteModule = async (appName: string, modulePath: string) => {
  const startTime = Date.now()

  try {
    const module = await import(`${appName}/${modulePath}`)
    const loadTime = Date.now() - startTime

    // ä¸ŠæŠ¥åŠ è½½æˆåŠŸ
    analytics.track('remote_module_loaded', {
      app: appName,
      module: modulePath,
      loadTime,
    })

    return module
  } catch (error) {
    // ä¸ŠæŠ¥åŠ è½½å¤±è´¥
    analytics.track('remote_module_error', {
      app: appName,
      module: modulePath,
      error: error.message,
    })

    throw error
  }
}
```

## æ€»ç»“

æ¨¡å—è”é‚¦ä¸ºå¾®å‰ç«¯æä¾›äº†ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„è§£å†³æ–¹æ¡ˆï¼š

âœ… **å¼€å‘ä½“éªŒå¥½** - å­åº”ç”¨ç‹¬ç«‹å¼€å‘ï¼Œçƒ­æ›´æ–°å¿«é€Ÿ  
âœ… **æ€§èƒ½ä¼˜ç§€** - ä¾èµ–å…±äº«ï¼ŒæŒ‰éœ€åŠ è½½  
âœ… **éƒ¨ç½²çµæ´»** - ç‹¬ç«‹éƒ¨ç½²ï¼Œæ”¯æŒç°åº¦å‘å¸ƒ  
âœ… **ç»´æŠ¤ç®€å•** - è§£è€¦åˆï¼Œæ˜“äºæ‰©å±•

é€šè¿‡æœ¬æŒ‡å—çš„é…ç½®ï¼Œæ‚¨å·²ç»æˆåŠŸæ­å»ºäº†ä¸€ä¸ªåŸºäº Vite + æ¨¡å—è”é‚¦çš„å¾®å‰ç«¯æ¶æ„ï¼

---

**ç›¸å…³æ–‡æ¡£**:

- [ä¸»åŒ…æ¶æ„è¯´æ˜](./ä¸»åŒ…æ¶æ„è¯´æ˜.md)
- [å¼€å‘æŒ‡å—](./å¼€å‘æŒ‡å—.md)
- [å¿«é€Ÿé…ç½®éƒ¨ç½²](./å¿«é€Ÿé…ç½®éƒ¨ç½².md)
